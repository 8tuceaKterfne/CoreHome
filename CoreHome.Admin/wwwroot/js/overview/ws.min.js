"use strict";function getWSAddress(){var n="https:"===document.location.protocol?!0:!1,t=window.location.host,i=n?"wss://":"ws://";return i+t}var webSocket,wsMaxLag=0,wsOrder=0,WsTest=function(){$("#wsbutton").attr("disabled")!=="disabled"&&($("#wsbutton").attr("disabled","disabled"),startWsTest())},startWsTest=function(){var n=new Date;wsOrder=0;webSocket=new WebSocket(getWSAddress()+"/admin/overview/Pushing");webSocket.onopen=function(){$("#spanStatus").text("connected")};webSocket.onmessage=function(t){var r=Number(t.data.split("|")[1]),i;$("#spanStatus").html("Server Time: "+t.data.split("|")[0]+"  Message Order: "+r);i=new Date-n;n=new Date;i>wsMaxLag&&(wsMaxLag=i);i>$("#wslagfilter").val()&&trig("WebSocket",i+"ms");r!==wsOrder+1&&trig("WebSocket","Event Not constant! prev:"+wsOrder+" current:"+r);wsOrder=r;$("#wsStatus").html("Current: "+i+"ms");$("#wsmax").html("Max: "+wsMaxLag+"ms");wschartData.labels.length>200&&(wschartData.labels.shift(),wschartData.datasets[0].data.shift());wschartData.labels.push("");wschartData.datasets[0].data.push(i);window.myWSLine.update()};webSocket.onerror=function(n){alert(n.message)};webSocket.onclose=function(){$("#spanStatus").text("disconnected")}},stopWsTest=function(){webSocket&&webSocket.close();$("#wsbutton").removeAttr("disabled","disabled")};