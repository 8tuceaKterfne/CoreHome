@model List<Article>

<div id="wrapper">

    <link rel="stylesheet" href="~/css/blog/shared.min.css" />
    <script src="~/js/blog/shared.min.js"></script>

    <!-- 文章列表 -->
    <div id="main">

        <h1 style="text-align:center;">@ViewBag.Warning</h1>
        <h1 style="text-align:center;">第 @(ViewBag.CurrentIndex + 1) 页 / 共 @ViewBag.LastPage 页</h1>

        <div>
            <div class="col-md-2">
                <input id="keyword" type="text" placeholder="Search" class="form-control" onkeydown="keyDown()"/>
                <br />
                <div class="post taglist" style="text-align:center;">
                    <h4>Top Tag</h4>
                    @if (ViewBag.Tags.Count == 0)
                    {
                        <h3>Nothing</h3>
                    }
                    @foreach (string tag in ViewBag.Tags)
                    {
                        <a class="footerlink"  href="/Blog/TagList?tagName=@tag"><u>#@tag</u></a>
                    }
                </div>
            </div>

            <div class="col-md-10 articlelist">

                @foreach (Article article in Model)
                {
                    <!-- 文章 -->
                    <article class="post">
                        <header>
                            <div class="title">
                                <!--标题-->
                                <h2>@article.Title</h2>
                                <!--标签-->
                                <p>
                                    @foreach (var tag in article.Tags)
                                    {
                                        var tagStr = "#" + tag.TagName;
                                        <a class="footerlink" href="/Blog/TagList?tagName=@tag.TagName"><u>@tagStr</u></a>
                                    }
                                </p>
                                <!--简述-->
                                <h3>@article.Overview</h3>
                            </div>
                            <div class="meta">
                                <h2 class="published">
                                    @article.Time
                                </h2>
                                <a href="#" class="author">
                                    <h2 class="name">LLLXY</h2>
                                    <img src="/favicon.ico" />
                                </a>
                            </div>
                        </header>
                        <!--封面-->
                        <a class="image featured" style="max-height:300px;" href="/Blog/Detail?articleid=@article.ArticleID">
                            <img src="@article.Cover" style="width:100%;" />
                        </a>
                        <footer>
                            <ul class="actions">
                                <li><a href="/Blog/Detail?articleid=@article.ArticleID" class="btn btn-default navbar-btn">查看全文</a></li>
                                @if (ViewBag.LastRead == article.ArticleID)
                                {
                                    <li class="lastReadTag">上次阅读</li>
                                }
                            </ul>
                        </footer>
                    </article>
                }
            </div>
        </div>

        <!-- 页面导航 -->
        <div class="text-center">
            <h1>第 @(ViewBag.CurrentIndex + 1) 页 / 共 @ViewBag.LastPage 页</h1>
            <ul class="actions pagination">
                @{ 
                    int previousPage = ViewBag.CurrentIndex - 1;
                    int nextPage = ViewBag.CurrentIndex + 1;
                    if (nextPage > ViewBag.LastPage-1)
                    {
                        nextPage = ViewBag.LastPage-1;
                    }
                    if (previousPage < 0)
                    {
                        previousPage = 0;
                    }
                }
                <li class="btn_changepage"><button onclick="window.location.href='/blog?index=@previousPage';" class="btn btn-default navbar-btn">上一页</button></li>
                <li class="btn_changepage"><button onclick="window.location.href='/blog?index=@nextPage';" class="btn btn-default navbar-btn">下一页</button></li>
            </ul>
        </div>

    </div>

</div>